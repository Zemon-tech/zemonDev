# Crucible Workspace Implementation Plan

## 1. Overall Layout
- **Container:** `flex h-full w-full`
- **Left Sidebar (ProblemDetailsSidebar):**
  - `w-1/4 min-w-[280px] bg-base-100 border-r border-base-200 overflow-auto`
  - Uses DaisyUI Card for grouping, Radix UI ScrollArea for smooth scrolling
  - Collapsible sections (Requirements, Constraints, AI Hints) using ShadCN/UI Accordion or Headless UI Disclosure
  - DaisyUI badges for tags
  - Personal notes textarea (auto-saved per problem)
- **Right Workspace (SolutionEditorWorkspace):**
  - `flex-1 flex flex-col bg-base-50`
  - Tiptap editor with code block extension (Notion-style, simple, beautiful, customizable)
  - Toolbar: DaisyUI btn-group, ShadCN/UI DropdownMenu for language selection
  - Sticky footer with Save Draft and Submit buttons
  - Auto-save to localStorage and backend every 10s
  - Draft is removed from storage on successful submit

## 2. AI Assistant Panel
- **Drawer:** Radix UI Drawer, slides in from right
- **Content:** DaisyUI chat or card, placeholder for context-aware suggestions (to be implemented later)
- **Trigger:** Floating btn-circle (DaisyUI) at bottom-right
- **Accessibility:** ARIA labels, keyboard accessible

## 3. Data Flow
- **Problem Details:**
  - Fetched from backend (title, description, requirements, constraints, tags)
- **Hints:**
  - Initially empty or static, later generated by AI based on solution
- **Personal Notes:**
  - Auto-saved to localStorage and backend per problem
- **Solution Draft:**
  - Auto-saved to localStorage and backend every 10s
  - Removed from storage on submit

## 4. UX Details
- **Auto-Save:**
  - useEffect hook, interval every 10s
  - Save to both localStorage and backend
- **Recovery Prompt:**
  - On mount, if draft exists, show Headless UI Dialog to recover
- **Keyboard Shortcuts:**
  - use-hotkeys for Cmd+K to open problem navigator modal (DaisyUI modal)
- **Toasts:**
  - ShadCN/UI toast hooks for "Draft saved" and "Analysis in progressâ€¦"

## 5. Mobile Responsiveness
- **Sidebar:**
  - Hidden on mobile, toggled with DaisyUI drawer
- **Editor:**
  - Full width on mobile
- **AI Button:**
  - Floating btn-circle
- **Restriction:**
  - No solution editing on mobile (show message or disable editor)

## 6. Theme & Accessibility
- **Colors:**
  - bg-base-100 / text-base-content (light)
  - dark:bg-base-800 / dark:text-base-200 (dark)
- **Fonts:**
  - font-sans for text, font-mono for code blocks
- **ARIA:**
  - aria-labels on buttons, role="navigation" for sidebar

## 7. Integration Points
- **Editor:** Tiptap with code block extension, Notion-style
- **Accordion/Disclosure:** ShadCN/UI or Headless UI
- **Drawer:** Radix UI
- **ScrollArea:** Radix UI
- **Toasts:** ShadCN/UI
- **Modal/Dialog:** Headless UI
- **Badges, Buttons, Card:** DaisyUI

## 8. Extensibility
- **AI Assistant:** Placeholder for context-aware suggestions, to be implemented later
- **Draft Handling:** Special handling for large drafts to be added later
- **Mobile:** Further restrictions or features can be added as needed

---
**This plan is the reference for all Crucible Workspace development.** 